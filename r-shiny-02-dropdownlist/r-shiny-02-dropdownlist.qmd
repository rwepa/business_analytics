---
format:
  revealjs: 
    theme: default
    menu: true
    slide-number: true
    code-line-numbers: true
    code-overflow: wrap
    code-block-bg: true
    code-block-border-left: "#31BAE9"
editor: visual
---

#  {background-image="images/r-shiny-02-dropdownlist.png"}

## å¤§ç¶±

2.1 shinyå‡½æ•¸ç¸½è¦½

2.2 ä¸‹æ‹‰å¼é¸å–®ç¯„ä¾‹("02_text")

2.3 æ–‡å­—æ–¹å¡Šç¯„ä¾‹("03_reactivity")

2.4 ç¿’é¡Œ

2.5 çµè«–

## 2.1 shinyå‡½æ•¸ç¸½è¦½

-   ç·šä¸Šæ–‡ä»¶

-   shinyå‡½æ•¸ç¸½è¡¨-15å€‹é¡åˆ¥

-   è¼¸å…¥å‡½æ•¸

-   è¼¸å‡ºå‡½æ•¸èˆ‡æ¸²æŸ“å‡½æ•¸

## ç·šä¸Šæ–‡ä»¶

-   Shiny RStudio \\ Reference \\ Latest version -\> <a href="https://shiny.rstudio.com/reference/shiny/1.7.4/" target="_blank">Shiny v1.7.4</a>

![](images/shiny_function_reference.png)

## shinyå‡½æ•¸ç¸½è¡¨-15å€‹é¡åˆ¥

```{r}
library(kableExtra)
df <- read.table(header=TRUE, sep = ",", text="
å‡½æ•¸                     , ä¸»é¡Œ    
1.UI Layout                   , *ä½ˆç½®    
2.UI Inputs                   , *è¼¸å…¥    
3.UI Outputs                  , *è¼¸å‡º    
4.Interface builder functions , HTMLå‡½æ•¸
5.Rendering functions         , *æ¸²æŸ“å‡½æ•¸
6.Reactive programming        , åæ‡‰ç¨‹å¼
7.Running                     , åŸ·è¡Œ    
8.Bookmarking state           , æ¨™è¨˜ç‹€æ…‹
9.Extending Shiny             , æ“´å……Shiny
10.Utility functions           , å·¥å…·å‡½æ•¸
11.Plot interaction            , äº’å‹•ç¹ªåœ–
12.Modules                     , æ¨¡çµ„    
13.Embedding                   , ç¬¬ä¸‰æ–¹åµŒå…¥
14.Testing                     , æ¸¬è©¦    
15.Superseded                  , ä¸å†ä½¿ç”¨(åœç”¨)å‡½æ•¸")
df %>%
  kbl(format = 'html') %>%
  kable_classic("hover", full_width = FALSE) %>%
  kable_styling(font_size = 22)
```

## è¼¸å…¥å‡½æ•¸

```{r}
library(kableExtra)
df <- read.table(header=TRUE, sep = ",", text="
è¼¸å…¥å‡½æ•¸           , ä¸»é¡Œ    
actionButton       , æ¯æ¬¡æŒ‰éˆ•+1
checkboxGroupInput , æ ¸å–æ–¹å¡Š-ç¾¤çµ„
checkboxInput      , æ ¸å–æ–¹å¡Š (ç”¨æ–¼YES/NO)
dateInput          , é¸å–å–®ä¸€æ—¥æœŸ
dateRangeInput     , é¸å–æ—¥æœŸç¯„åœ (é–‹å§‹-çµæŸ)
fileInput          , ä¸Šå‚³æª”æ¡ˆ
helpText           , è¼”åŠ©èªªæ˜
numericInput       , æ•¸å€¼è¼¸å…¥
radioButtons       , é¸å–æŒ‰éˆ• (å–®é¸é¡Œ)
selectInput        , ä¸‹æ‹‰å¼é¸å–®
sliderInput        , å·¦å³æ»‘æ¡¿
submitButton       , é€å‡ºæŒ‰éˆ•
textInput          , æ–‡å­—æ–¹å¡Š")
df %>%
  kbl() %>%
  kable_classic("hover", full_width = FALSE) %>%
  kable_styling(font_size = 22)
```

## è¼¸å‡ºå‡½æ•¸(Output)èˆ‡æ¸²æŸ“å‡½æ•¸(render)

```{r}
library(kableExtra)
df <- read.table(header=TRUE, sep = ",", text="
ä½¿ç”¨æ™‚æ©Ÿ, è¼¸å‡ºå‡½æ•¸ui, æ¸²æŸ“å‡½æ•¸server
table è¡¨æ ¼, dataTableOutput, renderDataTable
table è¡¨æ ¼, tableOutput, renderTable
image åœ–ç‰‡, imageOutput, renderImage
plot ç¹ªåœ–, plotOutput, renderPlot
raw HTML, htmlOutput, renderUI
raw HTML, uiOutput, renderUI
text æ–‡å­—, textOutput, renderText
text æ–‡å­—, verbatimTextOutput, renderPrint")
df %>%
  kbl() %>%
  kable_classic("hover", full_width = FALSE) %>%
  kable_styling(font_size = 30)
```

## "01_hello"ç¸½è¦½

```{r}
#| eval: false
#| echo: true
library(shiny)
ui <- fluidPage(    # ä½ˆç½®å‡½æ•¸
	sidebarLayout(    # ä½ˆç½®å‡½æ•¸
		sidebarPanel(   # ä½ˆç½®å‡½æ•¸
			sliderInput() # è¼¸å…¥å‡½æ•¸
		),
		mainPanel(      # ä½ˆç½®å‡½æ•¸
			plotOutput()  # è¼¸å‡ºå‡½æ•¸
		)	
	)
)
server <- function(input, output) {
	output$distPlot <- renderPlot({   # æ¸²æŸ“å‡½æ•¸
		...
		hist(...) # Rå‡½æ•¸
	})
}
shinyApp(ui = ui, server = server)


```

## 2.2 ä¸‹æ‹‰å¼é¸å–®ç¯„ä¾‹("02_text")

```{r}
#| eval: false
#| echo: true
library(shiny)
runExample("02_text")
```

![](images/02_text.png)

## èªè­˜02_text(æ‰¾å‡ºä¸‹æ‹‰å¼é¸å–®?)

```{r}
#| eval: FALSE
#| echo: TRUE
#| code-line-numbers: "16-18"
library(shiny)

# Define UI for dataset viewer app ----
ui <- fluidPage(
  
  # App title ----
  titlePanel("Shiny Text"),
  
  # Sidebar layout with a input and output definitions ----
  sidebarLayout(
    
    # Sidebar panel for inputs ----
    sidebarPanel(
      
      # Input: Selector for choosing dataset ----
      selectInput(inputId = "dataset",
                  label = "Choose a dataset:",
                  choices = c("rock", "pressure", "cars")),
      
      # Input: Numeric entry for number of obs to view ----
      numericInput(inputId = "obs",
                   label = "Number of observations to view:",
                   value = 10)
    ),
    
    # Main panel for displaying outputs ----
    mainPanel(
      
      # Output: Verbatim text for data summary ----
      verbatimTextOutput("summary"),
      
      # Output: HTML table with requested number of observations ----
      tableOutput("view")
      
    )
  )
)

# Define server logic to summarize and view selected dataset ----
server <- function(input, output) {
  
  # Return the requested dataset ----
  datasetInput <- reactive({
    switch(input$dataset,
           "rock" = rock,
           "pressure" = pressure,
           "cars" = cars)
  })
  
  # Generate a summary of the dataset ----
  output$summary <- renderPrint({
    dataset <- datasetInput()
    summary(dataset)
  })
  
  # Show the first "n" observations ----
  output$view <- renderTable({
    head(datasetInput(), n = input$obs)
  })
  
}

# Create Shiny app ----
shinyApp(ui = ui, server = server)
```

## é‡è¦å‡½æ•¸

-   ui: selectInput ä¸‹æ‹‰å¼é¸å–®, verbatimTextOutput æ–‡å­—è¼¸å‡º
-   ui: numericInput æ•¸å€¼è¼¸å…¥, tableOutput è¡¨æ ¼è¼¸å‡º
-   server: renderPrint æ¸²æŸ“åˆ—å°
-   server: renderTable æ¸²æŸ“è¡¨æ ¼
-   datasetInput \<- reactive({...}) åæ‡‰å‡½æ•¸

## 2.3 æ–‡å­—æ–¹å¡Šç¯„ä¾‹("03_reactivity")

-   åŸ·è¡Œç¯„ä¾‹

```{r}
#| eval: false
#| echo: true
library(shiny)
runExample("03_reactivity")
```

-   ui: textInput()
-   server: h3(textOutput(...))

## 2.4 ç¿’é¡Œ: ä½¿ç”¨iriså»ºç«‹shinyåŠŸèƒ½ {.smaller}

-   ui:

    -   ä¸‹æ‹‰å¼é¸å–® selectinput: åŒ…æ‹¬irisçš„å‰4å€‹æ•¸å€¼è®Šæ•¸åç¨±

    -   æ»‘æ¡¿ sliderInput: ç”¨æ–¼ç›´æ–¹åœ–çš„bins

    -   æ ¸å–æ–¹å¡Š checkboxInput: æ‰“å‹¾è¡¨ç¤ºç›´æ–¹åœ–åŠ ä¸Šå¯†åº¦åœ–(density plot)

-   server:

    -   å‰4å€‹è®Šæ•¸çš„æ•£ä½ˆåœ–çŸ©é™£pairs, åœ–å½¢æ¨£å¼ç‚ºå¯¦å¿ƒåœ“å½¢, é¡è‰²ä¾ Species è®Šæ•¸ç‚ºç¾¤çµ„

    -   é¸å–è®Šæ•¸çš„ç›´æ–¹åœ–hist

    -   æ ¸å–æ–¹å¡ŠåŠ ä¸Šæ©Ÿç‡å¯†åº¦åœ–density

## ç¿’é¡Œæˆæœ

![](images/r-shiny-02-exercise-output.png)

## 2.5 çµè«–

-   ç†è§£shinyå‡½æ•¸ç¸½è¦½

-   è¼¸å…¥å‡½æ•¸ğŸ”„è¼¸å‡ºå‡½æ•¸ğŸ”„æ¸²æŸ“å‡½æ•¸

-   èªè­˜ "02_text" ç¯„ä¾‹

-   èªè­˜ "03_reactivity" ç¯„ä¾‹

-   ç¿’é¡Œ(è§£ç­”...ç¬¬3é›†)

## åƒè€ƒè³‡æ–™

1.  Reference: <a href="https://shiny.rstudio.com/reference/shiny/1.7.4/" target="_blank">https://shiny.rstudio.com/reference/shiny/1.7.4/</a>
2.  ä¸‹æ‹‰å¼é¸å–® selectinput: <a href="https://shiny.rstudio.com/reference/shiny/1.7.4/selectinput" target="_blank">https://shiny.rstudio.com/reference/shiny/1.7.4/selectinput/</a>
3.  æ•¸å€¼è¼¸å…¥ numericInput: <a href="https://shiny.rstudio.com/reference/shiny/1.7.4/numericinput" target="_blank">https://shiny.rstudio.com/reference/shiny/1.7.4/numericinput</a>

## 
:::{style="text-align: center"}
[THANK YOUğŸ˜ƒ]{style="color: red;"}

-  æŒ‰ è¨‚é–±ã€è®šã€é–‹å•Ÿå°éˆ´éº
-  <a href="https://youtube.com/@alan9956" target="_blank">https://youtube.com/@alan9956</a>
-  <a href="http://rwepa.blogspot.com/" target="_blank">http://rwepa.blogspot.com/</a>  

![](images/tail_subscribe) ![](images/tail_rwepa.png)  ![](images/tail_lee.png)
:::